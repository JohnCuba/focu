var zt=Object.defineProperty;var Zt=(n,t,e)=>t in n?zt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var T=(n,t,e)=>(Zt(n,typeof t!="symbol"?t+"":t,e),e);import{r as dt,c as U,d as lt,a as E,b as Qt,e as G,o as W,f as M,g as _,t as ot,n as rt,F as ft,h as Jt,u as S,i as z,j as Z,k as ht,l as Kt,m as Xt,p as te,q as wt,s as ee,w as st,v as ne,x as vt,y as At,T as oe,z as pt,A as se,B as bt,C as kt,D as Pt,E as Rt,G as gt,H as re,I as ae,J as Dt}from"./index-d94a0007.js";const Ht={"en-ru":{key:"en-ru",source:"en",target:"ru"}};class jt{constructor({host:t}){T(this,"_host");T(this,"_headers",{"Content-Type":"application/json"});T(this,"get",async(t,e)=>this.makeRequest(t,"GET",e));T(this,"post",async(t,{body:e})=>this.makeRequest(t,"POST",{body:e}));this._host=t}get host(){return this._host}prepareBody(t){return t?{body:JSON.stringify(t)}:{}}async makeRequest(t,e,o){const r=new URL(t,this.host),s=await globalThis.fetch(r,{method:e,...this.prepareBody(o==null?void 0:o.body),headers:{...this._headers,...o==null?void 0:o.headers}});if(s.ok)return await s.json();{const a=await s.text();return Promise.reject(new Error(`[Fetcher][${r.toString()}]: `+a))}}}class ie{constructor(t){T(this,"fetcher");T(this,"langPair");this.langPair=t,this.fetcher=new jt({host:"https://translate.argosopentech.com/"})}getTranslation(t){return this.fetcher.post("/translate",{body:{q:t,source:this.langPair.source,target:this.langPair.target}}).then(e=>e.translatedText)}}class le{constructor(t,e,o){T(this,"_database");T(this,"name");T(this,"version");T(this,"storeKeys");T(this,"handleOpen",t=>{this._database=t.result});T(this,"handleUpgrade",(t,e)=>{switch(e.oldVersion){default:{this.create(t);break}}});T(this,"create",t=>{this.database||(this._database=t.result),this.storeKeys.forEach(e=>{this.database.createObjectStore(e,{keyPath:"id",autoIncrement:!0})})});T(this,"makeGetAllTransaction",async t=>(await this.initDb(),new Promise((e,o)=>{const a=this.database.transaction(t,"readonly").objectStore(t).getAll();a.onsuccess=()=>e(a.result),a.onerror=()=>o(`[LocalDatabase][${t}]: Unable to get all`)})));T(this,"makeAddTransaction",async(t,e)=>(await this.initDb(),new Promise((o,r)=>{const l=this.database.transaction(t,"readwrite").objectStore(t).add(e);l.onsuccess=()=>o({...e,id:l.result}),l.onerror=()=>r(`[LocalDatabase][${t}]: Unable to add ${e}`)})));T(this,"makeDeleteTransaction",async(t,e)=>(await this.initDb(),new Promise((o,r)=>{const l=this.database.transaction(t,"readwrite").objectStore(t).delete(e);l.onsuccess=()=>o(e),l.onerror=()=>r(`[LocalDatabase][${t}]: Unable to delete ${e}`)})));T(this,"makeEditTransaction",async(t,e)=>(await this.initDb(),new Promise((o,r)=>{const l=this.database.transaction(t,"readwrite").objectStore(t).put(e);l.onsuccess=()=>o({...e,id:l.result}),l.onerror=()=>r(`[LocalDatabase][${t}]: Unable to edit ${l.result}`)})));this.name=t,this.version=e,this.storeKeys=o}get database(){return this._database}initDb(){return new Promise((t,e)=>{if(this.database)return t("Local database already initialized");const o=globalThis.indexedDB.open(this.name,this.version);o.onsuccess=()=>{this.handleOpen(o),t("Local database opened")},o.onupgradeneeded=r=>{this.handleUpgrade(o,r),t("Local database upgraded")},o.onerror=e})}}class ce{constructor(t){T(this,"dbInstance");T(this,"dbName","dictionaries");T(this,"dbVersion",1);T(this,"dbStoreKey");this.dbStoreKey=t,this.dbInstance=new le(this.dbName,this.dbVersion,Object.keys(Ht)),this.dbInstance.initDb()}getDictionary(){return this.dbInstance.makeGetAllTransaction(this.dbStoreKey)}addWord(t){return this.dbInstance.makeAddTransaction(this.dbStoreKey,t)}deleteWord(t){return this.dbInstance.makeDeleteTransaction(this.dbStoreKey,t)}editWord(t){return this.dbInstance.makeEditTransaction(this.dbStoreKey,t)}}class ue{constructor(t="en-ru"){T(this,"localService");T(this,"translationService");T(this,"langPair");this.langPair=Ht[t],this.localService=new ce(t),this.translationService=new ie(this.langPair)}fetchTranslation(t){return this.translationService.getTranslation(t.value)}getAll(){return this.localService.getDictionary()}addWord(t){return this.localService.addWord({...t,translation:"",dateAdd:Date.now()})}async updateWordTranslation(t){const e=await this.fetchTranslation(t);return this.localService.editWord({...t,translation:e})}modifyWord(t){return this.localService.editWord(t)}deleteWord(t){return this.localService.deleteWord(t)}}const de=(n,t)=>{const e=dt({});return{result:U(()=>n.value.filter(s=>Object.entries(e).every(([a,l])=>{var h;return t[a]?(h=t[a])==null?void 0:h.call(t,s,l):(console.warn(`Filter func didn't passed for ${a}`),!0)}))),filterValues:e,setFilterValue:(s,a)=>{Object.assign(e,{[s]:a})}}},yt=Symbol("dictionary-store"),Ft=lt("dictionary",()=>{const n=new ue,t=E([]),{result:e,filterValues:o,setFilterValue:r}=de(t,{value:(d,v)=>d.value.toLowerCase().includes(String(v).toLowerCase())}),s=d=>{t.value=t.value.map(v=>d.id===v.id?d:v)},a=async({value:d})=>{const v={value:d},w=await n.addWord(v);t.value=[w,...t.value],h(w)},l=d=>n.fetchTranslation(d),h=async d=>{s({...d,isLoadTranslation:!0});let v=d;try{v=await n.updateWordTranslation(d)}finally{s({...v,isLoadTranslation:!1})}};return{words:t,wordsToShow:e,filterValues:o,addWord:a,removeWord:async d=>{const v=await n.deleteWord(d);t.value=t.value.filter(({id:w})=>w!==v)},fetchWords:async()=>{t.value=await n.getAll().then(d=>d.reverse())},updateWordTranslation:h,modifyWord:async({isLoadTranslation:d,...v})=>{s({...v,isLoadTranslation:!0});let w=v;try{w=await n.modifyWord(v)}finally{s({...w,isLoadTranslation:!1})}},getWordTranslation:l,setFilterValue:r}});var mt={},fe={get exports(){return mt},set exports(n){mt=n}};(function(n,t){(function(e,o){n.exports=o()})(Qt,function(){var e=1e3,o=6e4,r=36e5,s="millisecond",a="second",l="minute",h="hour",f="day",p="week",$="month",d="quarter",v="year",w="date",O="Invalid Date",C=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,tt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(g){var u=["th","st","nd","rd"],i=g%100;return"["+g+(u[(i-20)%10]||u[i]||u[0])+"]"}},K=function(g,u,i){var m=String(g);return!m||m.length>=u?g:""+Array(u+1-m.length).join(i)+g},A={s:K,z:function(g){var u=-g.utcOffset(),i=Math.abs(u),m=Math.floor(i/60),c=i%60;return(u<=0?"+":"-")+K(m,2,"0")+":"+K(c,2,"0")},m:function g(u,i){if(u.date()<i.date())return-g(i,u);var m=12*(i.year()-u.year())+(i.month()-u.month()),c=u.clone().add(m,$),y=i-c<0,b=u.clone().add(m+(y?-1:1),$);return+(-(m+(i-c)/(y?c-b:b-c))||0)},a:function(g){return g<0?Math.ceil(g)||0:Math.floor(g)},p:function(g){return{M:$,y:v,w:p,d:f,D:w,h,m:l,s:a,ms:s,Q:d}[g]||String(g||"").toLowerCase().replace(/s$/,"")},u:function(g){return g===void 0}},H="en",P={};P[H]=tt;var j=function(g){return g instanceof at},Q=function g(u,i,m){var c;if(!u)return H;if(typeof u=="string"){var y=u.toLowerCase();P[y]&&(c=y),i&&(P[y]=i,c=y);var b=u.split("-");if(!c&&b.length>1)return g(b[0])}else{var k=u.name;P[k]=u,c=k}return!m&&c&&(H=c),c||!m&&H},I=function(g,u){if(j(g))return g.clone();var i=typeof u=="object"?u:{};return i.date=g,i.args=arguments,new at(i)},D=A;D.l=Q,D.i=j,D.w=function(g,u){return I(g,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var at=function(){function g(i){this.$L=Q(i.locale,null,!0),this.parse(i)}var u=g.prototype;return u.parse=function(i){this.$d=function(m){var c=m.date,y=m.utc;if(c===null)return new Date(NaN);if(D.u(c))return new Date;if(c instanceof Date)return new Date(c);if(typeof c=="string"&&!/Z$/i.test(c)){var b=c.match(C);if(b){var k=b[2]-1||0,L=(b[7]||"0").substring(0,3);return y?new Date(Date.UTC(b[1],k,b[3]||1,b[4]||0,b[5]||0,b[6]||0,L)):new Date(b[1],k,b[3]||1,b[4]||0,b[5]||0,b[6]||0,L)}}return new Date(c)}(i),this.$x=i.x||{},this.init()},u.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},u.$utils=function(){return D},u.isValid=function(){return this.$d.toString()!==O},u.isSame=function(i,m){var c=I(i);return this.startOf(m)<=c&&c<=this.endOf(m)},u.isAfter=function(i,m){return I(i)<this.startOf(m)},u.isBefore=function(i,m){return this.endOf(m)<I(i)},u.$g=function(i,m,c){return D.u(i)?this[m]:this.set(c,i)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(i,m){var c=this,y=!!D.u(m)||m,b=D.p(i),k=function(X,F){var q=D.w(c.$u?Date.UTC(c.$y,F,X):new Date(c.$y,F,X),c);return y?q:q.endOf(f)},L=function(X,F){return D.w(c.toDate()[X].apply(c.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(F)),c)},x=this.$W,R=this.$M,Y=this.$D,B="set"+(this.$u?"UTC":"");switch(b){case v:return y?k(1,0):k(31,11);case $:return y?k(1,R):k(0,R+1);case p:var et=this.$locale().weekStart||0,nt=(x<et?x+7:x)-et;return k(y?Y-nt:Y+(6-nt),R);case f:case w:return L(B+"Hours",0);case h:return L(B+"Minutes",1);case l:return L(B+"Seconds",2);case a:return L(B+"Milliseconds",3);default:return this.clone()}},u.endOf=function(i){return this.startOf(i,!1)},u.$set=function(i,m){var c,y=D.p(i),b="set"+(this.$u?"UTC":""),k=(c={},c[f]=b+"Date",c[w]=b+"Date",c[$]=b+"Month",c[v]=b+"FullYear",c[h]=b+"Hours",c[l]=b+"Minutes",c[a]=b+"Seconds",c[s]=b+"Milliseconds",c)[y],L=y===f?this.$D+(m-this.$W):m;if(y===$||y===v){var x=this.clone().set(w,1);x.$d[k](L),x.init(),this.$d=x.set(w,Math.min(this.$D,x.daysInMonth())).$d}else k&&this.$d[k](L);return this.init(),this},u.set=function(i,m){return this.clone().$set(i,m)},u.get=function(i){return this[D.p(i)]()},u.add=function(i,m){var c,y=this;i=Number(i);var b=D.p(m),k=function(R){var Y=I(y);return D.w(Y.date(Y.date()+Math.round(R*i)),y)};if(b===$)return this.set($,this.$M+i);if(b===v)return this.set(v,this.$y+i);if(b===f)return k(1);if(b===p)return k(7);var L=(c={},c[l]=o,c[h]=r,c[a]=e,c)[b]||1,x=this.$d.getTime()+i*L;return D.w(x,this)},u.subtract=function(i,m){return this.add(-1*i,m)},u.format=function(i){var m=this,c=this.$locale();if(!this.isValid())return c.invalidDate||O;var y=i||"YYYY-MM-DDTHH:mm:ssZ",b=D.z(this),k=this.$H,L=this.$m,x=this.$M,R=c.weekdays,Y=c.months,B=function(F,q,ct,it){return F&&(F[q]||F(m,y))||ct[q].slice(0,it)},et=function(F){return D.s(k%12||12,F,"0")},nt=c.meridiem||function(F,q,ct){var it=F<12?"AM":"PM";return ct?it.toLowerCase():it},X={YY:String(this.$y).slice(-2),YYYY:this.$y,M:x+1,MM:D.s(x+1,2,"0"),MMM:B(c.monthsShort,x,Y,3),MMMM:B(Y,x),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:B(c.weekdaysMin,this.$W,R,2),ddd:B(c.weekdaysShort,this.$W,R,3),dddd:R[this.$W],H:String(k),HH:D.s(k,2,"0"),h:et(1),hh:et(2),a:nt(k,L,!0),A:nt(k,L,!1),m:String(L),mm:D.s(L,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:b};return y.replace(N,function(F,q){return q||X[F]||b.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(i,m,c){var y,b=D.p(m),k=I(i),L=(k.utcOffset()-this.utcOffset())*o,x=this-k,R=D.m(this,k);return R=(y={},y[v]=R/12,y[$]=R,y[d]=R/3,y[p]=(x-L)/6048e5,y[f]=(x-L)/864e5,y[h]=x/r,y[l]=x/o,y[a]=x/e,y)[b]||x,c?R:D.a(R)},u.daysInMonth=function(){return this.endOf($).$D},u.$locale=function(){return P[this.$L]},u.locale=function(i,m){if(!i)return this.$L;var c=this.clone(),y=Q(i,m,!0);return y&&(c.$L=y),c},u.clone=function(){return D.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},g}(),Tt=at.prototype;return I.prototype=Tt,[["$ms",s],["$s",a],["$m",l],["$H",h],["$W",f],["$M",$],["$y",v],["$D",w]].forEach(function(g){Tt[g[1]]=function(u){return this.$g(u,g[0],g[1])}}),I.extend=function(g,u){return g.$i||(g(u,at,I),g.$i=!0),I},I.locale=Q,I.isDayjs=j,I.unix=function(g){return I(1e3*g)},I.en=P[H],I.Ls=P,I.p={},I})})(fe);const ut=mt,he={class:"cell"},ve={key:0},pe={key:1,class:"progress"},ge=G({__name:"table_row",props:{word:null,isSelected:{type:Boolean}},emits:["click"],setup(n,{emit:t}){const e=n,o=()=>{t("click",e.word)};return(r,s)=>(W(),M("tr",{class:rt(["hover",{active:n.isSelected}]),onClick:o},[_("td",null,ot(n.word.value),1),_("td",he,[n.word.isLoadTranslation?(W(),M("progress",pe)):(W(),M("span",ve,ot(n.word.translation),1))])],2))}}),me={class:"table table-zebra w-full p-2"},_e=_("thead",null,[_("tr",null,[_("th",null,"Word"),_("th",null,"Translation")])],-1),we={key:0},be=_("td",null,null,-1),ye=G({__name:"dictionary_table",props:{words:null,selectedWord:null},emits:["click:word"],setup(n,{emit:t}){const e=r=>{t("click:word",r)},o=(r,s)=>s?ut(r).isSame(ut(s),"day"):!1;return(r,s)=>(W(),M("table",me,[_e,_("tbody",null,[(W(!0),M(ft,null,Jt(n.words,(a,l)=>{var h,f;return W(),M(ft,{key:a.id},[o(a.dateAdd,(h=n.words[l-1])==null?void 0:h.dateAdd)?z("",!0):(W(),M("tr",we,[_("th",null,ot(S(ut)(a.dateAdd).format("DD.MM.YYYY")),1),be])),Z(ge,{word:a,"is-selected":((f=n.selectedWord)==null?void 0:f.id)===a.id,onClick:e},null,8,["word","is-selected"])],64)}),128))])]))}});var Ot;const Vt=typeof window<"u",$e=n=>typeof n=="string",J=()=>{},It=Vt&&((Ot=window==null?void 0:window.navigator)==null?void 0:Ot.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function V(n){return typeof n=="function"?n():S(n)}function Nt(n,t){function e(...o){return new Promise((r,s)=>{Promise.resolve(n(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(s)})}return e}function Se(n,t={}){let e,o,r=J;const s=l=>{clearTimeout(l),r(),r=J};return l=>{const h=V(n),f=V(t.maxWait);return e&&s(e),h<=0||f!==void 0&&f<=0?(o&&(s(o),o=null),Promise.resolve(l())):new Promise((p,$)=>{r=t.rejectOnCancel?$:p,f&&!o&&(o=setTimeout(()=>{e&&s(e),o=null,p(l())},f)),e=setTimeout(()=>{o&&s(o),o=null,p(l())},h)})}}function Te(n,t=!0,e=!0,o=!1){let r=0,s,a=!0,l=J,h;const f=()=>{s&&(clearTimeout(s),s=void 0,l(),l=J)};return $=>{const d=V(n),v=Date.now()-r,w=()=>h=$();return f(),d<=0?(r=Date.now(),w()):(v>d&&(e||!a)?(r=Date.now(),w()):t&&(h=new Promise((O,C)=>{l=o?C:O,s=setTimeout(()=>{r=Date.now(),a=!0,O(w()),f()},Math.max(0,d-v))})),!e&&!s&&(s=setTimeout(()=>a=!0,d)),a=!1,h)}}function ke(n){return n}function $t(n){return Kt()?(Xt(n),!0):!1}function De(n,t=200,e={}){return Nt(Se(t,e),n)}function Oe(n,t=200,e=!1,o=!0,r=!1){return Nt(Te(t,e,o,r),n)}function Ut(n){return typeof n=="function"?U(n):E(n)}function Ie(n,t=!0){te()?wt(n):t?n():ee(n)}function xe(n=!1,t={}){const{truthyValue:e=!0,falsyValue:o=!1}=t,r=ht(n),s=E(n);function a(l){if(arguments.length)return s.value=l,s.value;{const h=V(e);return s.value=s.value===h?V(o):h,s.value}}return r?a:[s,a]}function We(n){var t;const e=V(n);return(t=e==null?void 0:e.$el)!=null?t:e}const Bt=Vt?window:void 0;function _t(...n){let t,e,o,r;if($e(n[0])||Array.isArray(n[0])?([e,o,r]=n,t=Bt):[t,e,o,r]=n,!t)return J;Array.isArray(e)||(e=[e]),Array.isArray(o)||(o=[o]);const s=[],a=()=>{s.forEach(p=>p()),s.length=0},l=(p,$,d,v)=>(p.addEventListener($,d,v),()=>p.removeEventListener($,d,v)),h=st(()=>[We(t),V(r)],([p,$])=>{a(),p&&s.push(...e.flatMap(d=>o.map(v=>l(p,d,v,$))))},{immediate:!0,flush:"post"}),f=()=>{h(),a()};return $t(f),f}function Le(n,t=!1){const e=E(),o=()=>e.value=!!n();return o(),Ie(o,t),e}const xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wt="__vueuse_ssr_handlers__";xt[Wt]=xt[Wt]||{};const Lt=1;function Me(n,t={}){const{throttle:e=0,idle:o=200,onStop:r=J,onScroll:s=J,offset:a={left:0,right:0,top:0,bottom:0},eventListenerOptions:l={capture:!1,passive:!0},behavior:h="auto"}=t,f=E(0),p=E(0),$=U({get(){return f.value},set(A){v(A,void 0)}}),d=U({get(){return p.value},set(A){v(void 0,A)}});function v(A,H){var P,j,Q;const I=V(n);I&&((Q=I instanceof Document?document.body:I)==null||Q.scrollTo({top:(P=V(H))!=null?P:d.value,left:(j=V(A))!=null?j:$.value,behavior:V(h)}))}const w=E(!1),O=dt({left:!0,right:!1,top:!0,bottom:!1}),C=dt({left:!1,right:!1,top:!1,bottom:!1}),N=A=>{w.value&&(w.value=!1,C.left=!1,C.right=!1,C.top=!1,C.bottom=!1,r(A))},tt=De(N,e+o),K=A=>{const H=A.target===document?A.target.documentElement:A.target,P=H.scrollLeft;C.left=P<f.value,C.right=P>p.value,O.left=P<=0+(a.left||0),O.right=P+H.clientWidth>=H.scrollWidth-(a.right||0)-Lt,f.value=P;let j=H.scrollTop;A.target===document&&!j&&(j=document.body.scrollTop),C.top=j<p.value,C.bottom=j>p.value,O.top=j<=0+(a.top||0),O.bottom=j+H.clientHeight>=H.scrollHeight-(a.bottom||0)-Lt,p.value=j,w.value=!0,tt(A),s(A)};return _t(n,"scroll",e?Oe(K,e,!0,!1):K,l),_t(n,"scrollend",N,l),{x:$,y:d,isScrolling:w,arrivedState:O,directions:C}}var Mt;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(Mt||(Mt={}));function Gt(n){const t=window.getComputedStyle(n);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&n.clientHeight<n.scrollHeight||t.overflowY==="auto"&&n.clientWidth<n.scrollWidth)return!0;{const e=n.parentNode;return!e||e.tagName==="BODY"?!1:Gt(e)}}function Ce(n){const t=n||window.event,e=t.target;return Gt(e)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function Ee(n,t=!1){const e=E(t);let o=null,r;st(Ut(n),l=>{if(l){const h=l;r=h.style.overflow,e.value&&(h.style.overflow="hidden")}},{immediate:!0});const s=()=>{const l=V(n);!l||e.value||(It&&(o=_t(l,"touchmove",h=>{Ce(h)},{passive:!1})),l.style.overflow="hidden",e.value=!0)},a=()=>{const l=V(n);!l||!e.value||(It&&(o==null||o()),l.style.overflow=r,e.value=!1)};return $t(a),U({get(){return e.value},set(l){l?s():a()}})}function Ae(n={}){const{interimResults:t=!0,continuous:e=!0,window:o=Bt}=n,r=Ut(n.lang||"en-US"),s=E(!1),a=E(!1),l=E(""),h=ne(void 0),f=(O=!s.value)=>{s.value=O},p=()=>{s.value=!0},$=()=>{s.value=!1},d=o&&(o.SpeechRecognition||o.webkitSpeechRecognition),v=Le(()=>d);let w;return v.value&&(w=new d,w.continuous=e,w.interimResults=t,w.lang=S(r),w.onstart=()=>{a.value=!1},st(r,O=>{w&&!s.value&&(w.lang=O)}),w.onresult=O=>{const C=Array.from(O.results).map(N=>(a.value=N.isFinal,N[0])).map(N=>N.transcript).join("");l.value=C,h.value=void 0},w.onerror=O=>{h.value=O},w.onend=()=>{s.value=!1,w.lang=S(r)},st(s,()=>{s.value?w.start():w.stop()})),$t(()=>{s.value=!1}),{isSupported:v,isListening:s,isFinal:a,recognition:w,result:l,error:h,toggle:f,start:p,stop:$}}var Pe=Object.defineProperty,Ct=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable,Et=(n,t,e)=>t in n?Pe(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,je=(n,t)=>{for(var e in t||(t={}))Re.call(t,e)&&Et(n,e,t[e]);if(Ct)for(var e of Ct(t))He.call(t,e)&&Et(n,e,t[e]);return n};const Fe={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};je({linear:ke},Fe);const Ve={key:0,class:"fixed top-0 left-0 w-full h-full z-30 flex justify-center items-center"},Ne=["onClick"],Ue={class:"absolute card lg:w-96 w-11/12 bg-base-100 shadow-xl"},Be=G({__name:"modal",props:{isOpen:{type:Boolean}},emits:["click:background"],setup(n,{emit:t}){const e=n,o=Ee(document.body),r=()=>{t("click:background")};return st(()=>e.isOpen,s=>{o.value=s}),(s,a)=>(W(),vt(oe,{name:"modal"},{default:At(()=>[n.isOpen?(W(),M("div",Ve,[_("div",{class:"bg-neutral/[.4] w-full h-full",onClick:pt(r,["self"])},null,8,Ne),_("div",Ue,[se(s.$slots,"default",{},void 0,!0)])])):z("",!0)]),_:3}))}});const St=(n,t)=>{const e=n.__vccOpts||n;for(const[o,r]of t)e[o]=r;return e},Ge=St(Be,[["__scopeId","data-v-1b4d69e4"]]),Ye={},qe={xmlns:"http://www.w3.org/2000/svg",height:"100%",width:"100%",viewBox:"0 96 960 960"},ze=_("path",{class:"fill-inherit",d:"m361 757 119-121 120 121 47-48-119-121 119-121-47-48-120 121-119-121-48 48 120 121-120 121 48 48ZM261 936q-24 0-42-18t-18-42V306h-41v-60h188v-30h264v30h188v60h-41v570q0 24-18 42t-42 18H261Zm438-630H261v570h438V306Zm-438 0v570-570Z"},null,-1),Ze=[ze];function Qe(n,t){return W(),M("svg",qe,Ze)}const Je=St(Ye,[["render",Qe]]),Ke={},Xe={xmlns:"http://www.w3.org/2000/svg",height:"100%",viewBox:"0 96 960 960",width:"100%"},tn=_("path",{class:"fill-inherit",d:"m475 976 181-480h82l186 480h-87l-41-126H604l-47 126h-82Zm151-196h142l-70-194h-2l-70 194Zm-466 76-55-55 204-204q-38-44-67.5-88.5T190 416h87q17 33 37.5 62.5T361 539q45-47 75-97.5T487 336H40v-80h280v-80h80v80h280v80H567q-22 69-58.5 135.5T419 598l98 99-30 81-127-122-200 200Z"},null,-1),en=[tn];function nn(n,t){return W(),M("svg",Xe,en)}const on=St(Ke,[["render",nn]]),sn={key:0,class:"card-body"},rn={class:"card-title"},an={class:"card-actions justify-end mt-2"},ln=["onSubmit"],cn=["value"],un={class:"form-control"},dn={class:"input-group"},fn=["value"],hn=["disabled","onClick"],vn={class:"card-actions justify-end mt-2"},pn=_("button",{class:"btn btn-sm btn-outline btn-success",type:"submit"}," сохранить ",-1),gn=G({__name:"record_modal",props:{word:null},emits:["click:close","click:remove","click:save","click:update-translation"],setup(n,{emit:t}){const e=n,[o,r]=xe(!1),s=()=>{r(!1),t("click:close")},a=()=>{e.word&&t("click:remove",e.word)},l=f=>{var d,v;if(!e.word)return;const p=new FormData(f.target),$={...e.word,value:((d=p.get("value"))==null?void 0:d.toString())??"",translation:((v=p.get("translation"))==null?void 0:v.toString())??""};t("click:save",$),r(!1)},h=()=>{e.word&&t("click:update-translation",e.word)};return(f,p)=>(W(),vt(S(Ge),{"is-open":!!n.word,"onClick:background":s},{default:At(()=>{var $,d,v,w,O,C,N;return[S(o)?z("",!0):(W(),M("div",sn,[_("h1",rn,ot(($=n.word)==null?void 0:$.value),1),_("p",null,ot((d=n.word)==null?void 0:d.translation),1),_("div",an,[_("button",{class:"btn btn-sm btn-outline btn-error fill-error hover:fill-info-content",onClick:a},[Z(S(Je),{class:"w-5 h-5"})]),_("button",{class:"btn btn-sm btn-outline btn-info",onClick:p[0]||(p[0]=tt=>S(r)(!0))}," редактировать ")])])),S(o)?(W(),M("form",{key:1,class:"card-body gap-y-4",onSubmit:pt(l,["prevent"])},[_("input",{class:"input input-sm input-bordered input-info",name:"value",value:(v=n.word)==null?void 0:v.value},null,8,cn),_("div",un,[_("div",dn,[_("input",{class:"input input-sm input-bordered input-info w-full",name:"translation",value:(w=n.word)==null?void 0:w.translation},null,8,fn),_("button",{class:rt(["btn btn-sm btn-square fill-info-content hover:fill-info",{loading:(O=n.word)==null?void 0:O.isLoadTranslation}]),disabled:(C=n.word)==null?void 0:C.isLoadTranslation,onClick:pt(h,["prevent"])},[(N=n.word)!=null&&N.isLoadTranslation?z("",!0):(W(),vt(S(on),{key:0,class:"w-4 h-4"}))],10,hn)])]),_("div",vn,[_("button",{class:"btn btn-sm btn-outline btn-error",onClick:p[1]||(p[1]=tt=>S(r)(!1))}," отмена "),pn])],40,ln)):z("",!0)]}),_:1},8,["is-open"]))}}),mn=G({__name:"index",setup(n){const t=Ft(),{wordsToShow:e}=bt(t),{removeWord:o,modifyWord:r,getWordTranslation:s}=t,a=E(),l=d=>{a.value=d},h=()=>{a.value=void 0},f=d=>{o(d.id),h()},p=d=>{r(d),h()},$=d=>{a.value&&(a.value={...a.value,isLoadTranslation:!0},s(d).then(v=>{a.value&&(a.value={...a.value,translation:v,isLoadTranslation:!1})}).finally(()=>{a.value&&(a.value={...a.value,isLoadTranslation:!1})}))};return(d,v)=>(W(),M(ft,null,[Z(ye,{words:S(e),"selected-word":a.value,"onClick:word":l},null,8,["words","selected-word"]),Z(S(gn),{word:a.value,"onClick:close":h,"onClick:remove":f,"onClick:save":p,"onClick:updateTranslation":$},null,8,["word"])],64))}}),_n={}.VITE_GOOGLE_CLIENT_ID;class wn{constructor(){T(this,"fetcher");T(this,"tokenStorageKey","google-jwt-token");T(this,"login",(t,e)=>{globalThis.google.accounts.oauth2.initTokenClient({client_id:_n,callback:o=>{this.token=o.access_token,t==null||t()},error_callback:e,scope:"profile"}).requestAccessToken()});T(this,"logout",t=>{this.token=null,t==null||t()});T(this,"getUserInfo",()=>this.fetcher.get("",{headers:{Authorization:`Bearer ${this.token}`}}));this.fetcher=new jt({host:"https://www.googleapis.com/oauth2/v1/userinfo?alt=json"})}get token(){return globalThis.localStorage.getItem(this.tokenStorageKey)}set token(t){if(!t){globalThis.localStorage.removeItem(this.tokenStorageKey);return}globalThis.localStorage.setItem(this.tokenStorageKey,t)}get isLoggedIn(){return!!this.token}}const bn=lt("google-store",()=>{const n=new wn,t=E(null),e=async()=>{t.value=await n.getUserInfo()};return wt(()=>{n.isLoggedIn&&e()}),{userInfo:t,promptToLogin:()=>{n.login(e)},logout:()=>{n.logout(()=>{t.value=null})},getUserInfo:n.getUserInfo}}),Yt=Symbol("settings-store"),yn=lt("settings",()=>{const n=bn(),{userInfo:t}=bt(n),{promptToLogin:e,logout:o,getUserInfo:r}=n;return{userInfo:t,promptToLoginWithGoogle:e,logoutFromGoogle:o,getGoogleUserInfo:r}}),qt=({scrollElement:n=document,offset:t}=$n)=>{const{directions:e,y:o,arrivedState:r}=Me(n,{behavior:"smooth"}),{bottom:s,top:a}=kt(r),{top:l,bottom:h}=kt(e),f=E(!1);return Pt(()=>{l.value||s.value||a.value?f.value=!1:o.value>((t==null?void 0:t.value)??0)&&h.value&&(f.value=!0)},{flush:"post"}),{isHidden:f}},$n={scrollElement:document},Sn=_("div",{class:"navbar-start"},[_("h1",{class:"normal-case font-semibold text-xl select-none"}," focu ")],-1),Tn={class:"navbar-end gap-x-2"},kn={class:"form-control"},Dn=["value","onKeypress"],On={class:"dropdown dropdown-end"},In={tabindex:"0",class:"btn btn-ghost btn-circle avatar"},xn={class:"w-10 rounded-full"},Wn=["src"],Ln={tabindex:"0",class:"mt-3 p-2 shadow menu menu-compact dropdown-content bg-base-100 rounded-box w-52"},Mn={key:0},Cn={key:1},En=G({__name:"header",setup(n){const t=gt(yt),e=gt(Yt),o=U(()=>{var f;return((f=t==null?void 0:t.filterValues)==null?void 0:f.value)||""}),r=U(()=>e==null?void 0:e.userInfo),s=E(),a=U(()=>{var f;return((f=s.value)==null?void 0:f.offsetHeight)||0}),{isHidden:l}=qt({offset:a}),h=({target:f})=>{t==null||t.setFilterValue("value",f.value)};return(f,p)=>(W(),M("header",{ref_key:"elementRef",ref:s,class:rt(["navbar bg-base-100 rounded-xl z-20 fixed -top-28 gap-x-2 drop-shadow-xl",{"top-1":!S(l)}])},[Sn,_("div",Tn,[_("div",kn,[_("input",{value:S(o),type:"text",placeholder:"Search",class:"input input-bordered",onInput:h,onKeypress:Rt(h,["enter"])},null,40,Dn)]),_("div",On,[_("label",In,[_("div",xn,[_("img",{src:S(r)?S(r).picture:"/img/icons/person.svg",referrerpolicy:"no-referrer"},null,8,Wn)])]),_("ul",Ln,[S(r)?z("",!0):(W(),M("li",Mn,[_("span",{onClick:p[0]||(p[0]=(...$)=>{var d,v;return((d=S(e))==null?void 0:d.promptToLoginWithGoogle)&&((v=S(e))==null?void 0:v.promptToLoginWithGoogle(...$))})}," Login with Google ")])),S(r)?(W(),M("li",Cn,[_("span",{onClick:p[1]||(p[1]=(...$)=>{var d,v;return((d=S(e))==null?void 0:d.logoutFromGoogle)&&((v=S(e))==null?void 0:v.logoutFromGoogle(...$))})}," Logout from Google ")])):z("",!0)])])])],2))}}),An=lt("editor",()=>{const n=gt(yt),t=E(""),e=E(!1),o=async()=>{if(e.value=!0,!t.value){r();return}await(n==null?void 0:n.addWord({value:t.value})),r()},r=()=>{t.value="",e.value=!1};return{word:t,isLoading:e,submitWord:o}}),Pn=["src"],Rn=G({__name:"speech",emits:["update:modelValue"],setup(n,{emit:t}){const{isSupported:e,isListening:o,isFinal:r,result:s,start:a,stop:l}=Ae(),h=U(()=>`/focu/img/icons/${o.value?"voice_recording":"mic"}.svg`),f=U(()=>({"btn-active":o.value})),p=()=>{o.value?l():a()};return Pt(()=>{r.value&&(t("update:modelValue",s.value),l())}),($,d)=>S(e)?(W(),M("button",{key:0,class:rt(["btn btn-success btn-square drop-shadow",S(f)]),onClick:p},[_("img",{src:S(h),alt:"toggle speech recognize",width:"32",height:"32"},null,8,Pn)],2)):z("",!0)}}),Hn=["disabled"],jn=G({__name:"editor",setup(n){const t=E(),e=An(),{word:o,isLoading:r}=bt(e),{submitWord:s}=e,a=U(()=>{var h;return((h=t.value)==null?void 0:h.offsetHeight)||0}),{isHidden:l}=qt({offset:a});return(h,f)=>(W(),M("div",{ref_key:"elementRef",ref:t,class:rt(["navbar bg-base-100 rounded-xl z-20 fixed -bottom-28 gap-x-2 drop-shadow-2xl",{"bottom-1":!S(l)}])},[re(_("input",{"onUpdate:modelValue":f[0]||(f[0]=p=>ht(o)?o.value=p:null),type:"text",autocomplete:"off",class:"input input-bordered input-success flex-1 drop-shadow",placeholder:"Type something...",disabled:S(r),onKeypress:f[1]||(f[1]=Rt((...p)=>S(s)&&S(s)(...p),["enter"]))},null,40,Hn),[[ae,S(o)]]),Z(Rn,{modelValue:S(o),"onUpdate:modelValue":f[2]||(f[2]=p=>ht(o)?o.value=p:null),disabled:S(r)},null,8,["modelValue","disabled"])],2))}}),Fn={class:"min-h-full bg-base-200"},Vn={class:"relative container mx-auto"},Nn={class:"px-2 py-20"},Gn=G({__name:"index",setup(n){const t=Ft();Dt(yt,t);const e=yn();return Dt(Yt,e),wt(()=>{t.fetchWords()}),(o,r)=>(W(),M("main",Fn,[_("div",Vn,[Z(S(En),{class:"container"}),_("section",Nn,[Z(S(mn))]),Z(S(jn),{class:"container"})])]))}});export{Gn as default};
