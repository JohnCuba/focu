var Gt=Object.defineProperty;var Zt=(n,t,e)=>t in n?Gt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var T=(n,t,e)=>(Zt(n,typeof t!="symbol"?t+"":t,e),e);import{r as ft,c as B,d as wt,a as P,b as zt,e as Q,o as O,f as x,g as p,t as ot,n as J,F as ct,h as Jt,u as S,i as Z,j as N,k as vt,l as Kt,m as Xt,p as te,q as yt,s as ee,w as rt,v as ne,x as ut,y as Et,T as se,z as gt,A as oe,B as At,C as kt,D as qt,E as pt,G as mt,H as re,I as ae,J as Dt}from"./index-5400e763.js";const Rt={"en-ru":{key:"en-ru",source:"en",target:"ru"}};class Ht{constructor({host:t}){T(this,"_host");T(this,"_headers",{"Content-Type":"application/json"});T(this,"get",async(t,e)=>this.makeRequest(t,"GET",e));T(this,"post",async(t,{body:e})=>this.makeRequest(t,"POST",{body:e}));this._host=t}get host(){return this._host}prepareBody(t){return t?{body:JSON.stringify(t)}:{}}async makeRequest(t,e,s){const a=new URL(t,this.host),o=await globalThis.fetch(a,{method:e,...this.prepareBody(s==null?void 0:s.body),headers:{...this._headers,...s==null?void 0:s.headers}});if(o.ok)return await o.json();{const r=await o.text();return Promise.reject(new Error(`[Fetcher][${a.toString()}]: `+r))}}}class ie{constructor(t){T(this,"fetcher");T(this,"langPair");this.langPair=t,this.fetcher=new Ht({host:"https://translate.argosopentech.com/"})}getTranslation(t){return this.fetcher.post("/translate",{body:{q:t,source:this.langPair.source,target:this.langPair.target}}).then(e=>e.translatedText)}}class le{constructor(t,e,s){T(this,"_database");T(this,"name");T(this,"version");T(this,"storeKeys");T(this,"handleOpen",t=>{this._database=t.result});T(this,"handleUpgrade",(t,e)=>{switch(e.oldVersion){default:{this.create(t);break}}});T(this,"create",t=>{this.database||(this._database=t.result),this.storeKeys.forEach(e=>{this.database.createObjectStore(e,{keyPath:"id",autoIncrement:!0})})});T(this,"makeGetAllTransaction",async t=>(await this.initDb(),new Promise((e,s)=>{const r=this.database.transaction(t,"readonly").objectStore(t).getAll();r.onsuccess=()=>e(r.result),r.onerror=()=>s(`[LocalDatabase][${t}]: Unable to get all`)})));T(this,"makeAddTransaction",async(t,e)=>(await this.initDb(),new Promise((s,a)=>{const l=this.database.transaction(t,"readwrite").objectStore(t).add(e);l.onsuccess=()=>s({...e,id:l.result}),l.onerror=()=>a(`[LocalDatabase][${t}]: Unable to add ${e}`)})));T(this,"makeDeleteTransaction",async(t,e)=>(await this.initDb(),new Promise((s,a)=>{const l=this.database.transaction(t,"readwrite").objectStore(t).delete(e);l.onsuccess=()=>s(e),l.onerror=()=>a(`[LocalDatabase][${t}]: Unable to delete ${e}`)})));T(this,"makeEditTransaction",async(t,e)=>(await this.initDb(),new Promise((s,a)=>{const l=this.database.transaction(t,"readwrite").objectStore(t).put(e);l.onsuccess=()=>s({...e,id:l.result}),l.onerror=()=>a(`[LocalDatabase][${t}]: Unable to edit ${l.result}`)})));this.name=t,this.version=e,this.storeKeys=s}get database(){return this._database}initDb(){return new Promise((t,e)=>{if(this.database)return t("Local database already initialized");const s=globalThis.indexedDB.open(this.name,this.version);s.onsuccess=()=>{this.handleOpen(s),t("Local database opened")},s.onupgradeneeded=a=>{this.handleUpgrade(s,a),t("Local database upgraded")},s.onerror=e})}}class ce{constructor(t){T(this,"dbInstance");T(this,"dbName","dictionaries");T(this,"dbVersion",1);T(this,"dbStoreKey");this.dbStoreKey=t,this.dbInstance=new le(this.dbName,this.dbVersion,Object.keys(Rt)),this.dbInstance.initDb()}getDictionary(){return this.dbInstance.makeGetAllTransaction(this.dbStoreKey)}addWord(t){return this.dbInstance.makeAddTransaction(this.dbStoreKey,t)}deleteWord(t){return this.dbInstance.makeDeleteTransaction(this.dbStoreKey,t)}editWord(t){return this.dbInstance.makeEditTransaction(this.dbStoreKey,t)}}class ue{constructor(t="en-ru"){T(this,"localService");T(this,"translationService");T(this,"langPair");this.langPair=Rt[t],this.localService=new ce(t),this.translationService=new ie(this.langPair)}fetchTranslation(t){return this.translationService.getTranslation(t.value)}getAll(){return this.localService.getDictionary()}addWord(t){return this.localService.addWord({...t,translation:"",dateAdd:Date.now()})}async updateWordTranslation(t){const e=await this.fetchTranslation(t);return this.localService.editWord({...t,translation:e})}modifyWord(t){return this.localService.editWord(t)}deleteWord(t){return this.localService.deleteWord(t)}}const de=(n,t)=>{const e=ft({});return{result:B(()=>n.value.filter(o=>Object.entries(e).every(([r,l])=>{var f;return t[r]?(f=t[r])==null?void 0:f.call(t,o,l):(console.warn(`Filter func didn't passed for ${r}`),!0)}))),filterValues:e,setFilterValue:(o,r)=>{Object.assign(e,{[o]:r})}}},$t=Symbol("dictionary-store"),jt=wt("dictionary",()=>{const n=new ue,t=P([]),{result:e,filterValues:s,setFilterValue:a}=de(t,{value:(d,v)=>d.value.toLowerCase().includes(String(v).toLowerCase())}),o=d=>{t.value=t.value.map(v=>d.id===v.id?d:v)},r=async({value:d})=>{const v={value:d},b=await n.addWord(v);t.value=[b,...t.value],f(b)},l=d=>n.fetchTranslation(d),f=async d=>{o({...d,isLoadTranslation:!0});let v=d;try{v=await n.updateWordTranslation(d)}finally{o({...v,isLoadTranslation:!1})}};return{words:t,wordsToShow:e,filterValues:s,addWord:r,removeWord:async d=>{const v=await n.deleteWord(d);t.value=t.value.filter(({id:b})=>b!==v)},fetchWords:async()=>{t.value=await n.getAll().then(d=>d.reverse())},updateWordTranslation:f,modifyWord:async({isLoadTranslation:d,...v})=>{o({...v,isLoadTranslation:!0});let b=v;try{b=await n.modifyWord(v)}finally{o({...b,isLoadTranslation:!1})}},getWordTranslation:l,setFilterValue:a}});var _t={},he={get exports(){return _t},set exports(n){_t=n}};(function(n,t){(function(e,s){n.exports=s()})(zt,function(){var e=1e3,s=6e4,a=36e5,o="millisecond",r="second",l="minute",f="hour",h="day",g="week",$="month",d="quarter",v="year",b="date",I="Invalid Date",L=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,F=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,et={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(m){var u=["th","st","nd","rd"],i=m%100;return"["+m+(u[(i-20)%10]||u[i]||u[0])+"]"}},X=function(m,u,i){var _=String(m);return!_||_.length>=u?m:""+Array(u+1-_.length).join(i)+m},E={s:X,z:function(m){var u=-m.utcOffset(),i=Math.abs(u),_=Math.floor(i/60),c=i%60;return(u<=0?"+":"-")+X(_,2,"0")+":"+X(c,2,"0")},m:function m(u,i){if(u.date()<i.date())return-m(i,u);var _=12*(i.year()-u.year())+(i.month()-u.month()),c=u.clone().add(_,$),y=i-c<0,w=u.clone().add(_+(y?-1:1),$);return+(-(_+(i-c)/(y?c-w:w-c))||0)},a:function(m){return m<0?Math.ceil(m)||0:Math.floor(m)},p:function(m){return{M:$,y:v,w:g,d:h,D:b,h:f,m:l,s:r,ms:o,Q:d}[m]||String(m||"").toLowerCase().replace(/s$/,"")},u:function(m){return m===void 0}},R="en",A={};A[R]=et;var H=function(m){return m instanceof it},z=function m(u,i,_){var c;if(!u)return R;if(typeof u=="string"){var y=u.toLowerCase();A[y]&&(c=y),i&&(A[y]=i,c=y);var w=u.split("-");if(!c&&w.length>1)return m(w[0])}else{var k=u.name;A[k]=u,c=k}return!_&&c&&(R=c),c||!_&&R},W=function(m,u){if(H(m))return m.clone();var i=typeof u=="object"?u:{};return i.date=m,i.args=arguments,new it(i)},D=E;D.l=z,D.i=H,D.w=function(m,u){return W(m,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var it=function(){function m(i){this.$L=z(i.locale,null,!0),this.parse(i)}var u=m.prototype;return u.parse=function(i){this.$d=function(_){var c=_.date,y=_.utc;if(c===null)return new Date(NaN);if(D.u(c))return new Date;if(c instanceof Date)return new Date(c);if(typeof c=="string"&&!/Z$/i.test(c)){var w=c.match(L);if(w){var k=w[2]-1||0,C=(w[7]||"0").substring(0,3);return y?new Date(Date.UTC(w[1],k,w[3]||1,w[4]||0,w[5]||0,w[6]||0,C)):new Date(w[1],k,w[3]||1,w[4]||0,w[5]||0,w[6]||0,C)}}return new Date(c)}(i),this.$x=i.x||{},this.init()},u.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},u.$utils=function(){return D},u.isValid=function(){return this.$d.toString()!==I},u.isSame=function(i,_){var c=W(i);return this.startOf(_)<=c&&c<=this.endOf(_)},u.isAfter=function(i,_){return W(i)<this.startOf(_)},u.isBefore=function(i,_){return this.endOf(_)<W(i)},u.$g=function(i,_,c){return D.u(i)?this[_]:this.set(c,i)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(i,_){var c=this,y=!!D.u(_)||_,w=D.p(i),k=function(tt,j){var G=D.w(c.$u?Date.UTC(c.$y,j,tt):new Date(c.$y,j,tt),c);return y?G:G.endOf(h)},C=function(tt,j){return D.w(c.toDate()[tt].apply(c.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(j)),c)},M=this.$W,q=this.$M,Y=this.$D,U="set"+(this.$u?"UTC":"");switch(w){case v:return y?k(1,0):k(31,11);case $:return y?k(1,q):k(0,q+1);case g:var nt=this.$locale().weekStart||0,st=(M<nt?M+7:M)-nt;return k(y?Y-st:Y+(6-st),q);case h:case b:return C(U+"Hours",0);case f:return C(U+"Minutes",1);case l:return C(U+"Seconds",2);case r:return C(U+"Milliseconds",3);default:return this.clone()}},u.endOf=function(i){return this.startOf(i,!1)},u.$set=function(i,_){var c,y=D.p(i),w="set"+(this.$u?"UTC":""),k=(c={},c[h]=w+"Date",c[b]=w+"Date",c[$]=w+"Month",c[v]=w+"FullYear",c[f]=w+"Hours",c[l]=w+"Minutes",c[r]=w+"Seconds",c[o]=w+"Milliseconds",c)[y],C=y===h?this.$D+(_-this.$W):_;if(y===$||y===v){var M=this.clone().set(b,1);M.$d[k](C),M.init(),this.$d=M.set(b,Math.min(this.$D,M.daysInMonth())).$d}else k&&this.$d[k](C);return this.init(),this},u.set=function(i,_){return this.clone().$set(i,_)},u.get=function(i){return this[D.p(i)]()},u.add=function(i,_){var c,y=this;i=Number(i);var w=D.p(_),k=function(q){var Y=W(y);return D.w(Y.date(Y.date()+Math.round(q*i)),y)};if(w===$)return this.set($,this.$M+i);if(w===v)return this.set(v,this.$y+i);if(w===h)return k(1);if(w===g)return k(7);var C=(c={},c[l]=s,c[f]=a,c[r]=e,c)[w]||1,M=this.$d.getTime()+i*C;return D.w(M,this)},u.subtract=function(i,_){return this.add(-1*i,_)},u.format=function(i){var _=this,c=this.$locale();if(!this.isValid())return c.invalidDate||I;var y=i||"YYYY-MM-DDTHH:mm:ssZ",w=D.z(this),k=this.$H,C=this.$m,M=this.$M,q=c.weekdays,Y=c.months,U=function(j,G,dt,lt){return j&&(j[G]||j(_,y))||dt[G].slice(0,lt)},nt=function(j){return D.s(k%12||12,j,"0")},st=c.meridiem||function(j,G,dt){var lt=j<12?"AM":"PM";return dt?lt.toLowerCase():lt},tt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:M+1,MM:D.s(M+1,2,"0"),MMM:U(c.monthsShort,M,Y,3),MMMM:U(Y,M),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:U(c.weekdaysMin,this.$W,q,2),ddd:U(c.weekdaysShort,this.$W,q,3),dddd:q[this.$W],H:String(k),HH:D.s(k,2,"0"),h:nt(1),hh:nt(2),a:st(k,C,!0),A:st(k,C,!1),m:String(C),mm:D.s(C,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:w};return y.replace(F,function(j,G){return G||tt[j]||w.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(i,_,c){var y,w=D.p(_),k=W(i),C=(k.utcOffset()-this.utcOffset())*s,M=this-k,q=D.m(this,k);return q=(y={},y[v]=q/12,y[$]=q,y[d]=q/3,y[g]=(M-C)/6048e5,y[h]=(M-C)/864e5,y[f]=M/a,y[l]=M/s,y[r]=M/e,y)[w]||M,c?q:D.a(q)},u.daysInMonth=function(){return this.endOf($).$D},u.$locale=function(){return A[this.$L]},u.locale=function(i,_){if(!i)return this.$L;var c=this.clone(),y=z(i,_,!0);return y&&(c.$L=y),c},u.clone=function(){return D.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},m}(),Tt=it.prototype;return W.prototype=Tt,[["$ms",o],["$s",r],["$m",l],["$H",f],["$W",h],["$M",$],["$y",v],["$D",b]].forEach(function(m){Tt[m[1]]=function(u){return this.$g(u,m[0],m[1])}}),W.extend=function(m,u){return m.$i||(m(u,it,W),m.$i=!0),W},W.locale=z,W.isDayjs=H,W.unix=function(m){return W(1e3*m)},W.en=A[R],W.Ls=A,W.p={},W})})(he);const ht=_t,fe={class:"cell"},ve={key:0},ge={key:1,class:"progress"},pe=Q({__name:"table_row",props:{word:null,isSelected:{type:Boolean}},emits:["click"],setup(n,{emit:t}){const e=n,s=()=>{t("click",e.word)};return(a,o)=>(O(),x("tr",{class:J(["hover",{active:n.isSelected}]),onClick:s},[p("td",null,ot(n.word.value),1),p("td",fe,[n.word.isLoadTranslation?(O(),x("progress",ge)):(O(),x("span",ve,ot(n.word.translation),1))])],2))}}),me={class:"table table-zebra w-full p-2"},_e=p("thead",null,[p("tr",null,[p("th",null,"Word"),p("th",null,"Translation")])],-1),be={key:0},we=p("td",null,null,-1),ye=Q({__name:"dictionary_table",props:{words:null,selectedWord:null},emits:["click:word"],setup(n,{emit:t}){const e=a=>{t("click:word",a)},s=(a,o)=>o?ht(a).isSame(ht(o),"day"):!1;return(a,o)=>(O(),x("table",me,[_e,p("tbody",null,[(O(!0),x(ct,null,Jt(n.words,(r,l)=>{var f,h;return O(),x(ct,{key:r.id},[s(r.dateAdd,(f=n.words[l-1])==null?void 0:f.dateAdd)?Z("",!0):(O(),x("tr",be,[p("th",null,ot(S(ht)(r.dateAdd).format("DD.MM.YYYY")),1),we])),N(pe,{word:r,"is-selected":((h=n.selectedWord)==null?void 0:h.id)===r.id,onClick:e},null,8,["word","is-selected"])],64)}),128))])]))}});var Ot;const Vt=typeof window<"u",$e=n=>typeof n=="string",K=()=>{},xt=Vt&&((Ot=window==null?void 0:window.navigator)==null?void 0:Ot.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function V(n){return typeof n=="function"?n():S(n)}function Ft(n,t){function e(...s){return new Promise((a,o)=>{Promise.resolve(n(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(a).catch(o)})}return e}function Se(n,t={}){let e,s,a=K;const o=l=>{clearTimeout(l),a(),a=K};return l=>{const f=V(n),h=V(t.maxWait);return e&&o(e),f<=0||h!==void 0&&h<=0?(s&&(o(s),s=null),Promise.resolve(l())):new Promise((g,$)=>{a=t.rejectOnCancel?$:g,h&&!s&&(s=setTimeout(()=>{e&&o(e),s=null,g(l())},h)),e=setTimeout(()=>{s&&o(s),s=null,g(l())},f)})}}function Te(n,t=!0,e=!0,s=!1){let a=0,o,r=!0,l=K,f;const h=()=>{o&&(clearTimeout(o),o=void 0,l(),l=K)};return $=>{const d=V(n),v=Date.now()-a,b=()=>f=$();return h(),d<=0?(a=Date.now(),b()):(v>d&&(e||!r)?(a=Date.now(),b()):t&&(f=new Promise((I,L)=>{l=s?L:I,o=setTimeout(()=>{a=Date.now(),r=!0,I(b()),h()},Math.max(0,d-v))})),!e&&!o&&(o=setTimeout(()=>r=!0,d)),r=!1,f)}}function ke(n){return n}function St(n){return Kt()?(Xt(n),!0):!1}function De(n,t=200,e={}){return Ft(Se(t,e),n)}function Oe(n,t=200,e=!1,s=!0,a=!1){return Ft(Te(t,e,s,a),n)}function Bt(n){return typeof n=="function"?B(n):P(n)}function xe(n,t=!0){te()?yt(n):t?n():ee(n)}function Ie(n=!1,t={}){const{truthyValue:e=!0,falsyValue:s=!1}=t,a=vt(n),o=P(n);function r(l){if(arguments.length)return o.value=l,o.value;{const f=V(e);return o.value=o.value===f?V(s):f,o.value}}return a?r:[o,r]}function We(n){var t;const e=V(n);return(t=e==null?void 0:e.$el)!=null?t:e}const Nt=Vt?window:void 0;function bt(...n){let t,e,s,a;if($e(n[0])||Array.isArray(n[0])?([e,s,a]=n,t=Nt):[t,e,s,a]=n,!t)return K;Array.isArray(e)||(e=[e]),Array.isArray(s)||(s=[s]);const o=[],r=()=>{o.forEach(g=>g()),o.length=0},l=(g,$,d,v)=>(g.addEventListener($,d,v),()=>g.removeEventListener($,d,v)),f=rt(()=>[We(t),V(a)],([g,$])=>{r(),g&&o.push(...e.flatMap(d=>s.map(v=>l(g,d,v,$))))},{immediate:!0,flush:"post"}),h=()=>{f(),r()};return St(h),h}function Me(n,t=!1){const e=P(),s=()=>e.value=!!n();return s(),xe(s,t),e}const It=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wt="__vueuse_ssr_handlers__";It[Wt]=It[Wt]||{};const Mt=1;function Ce(n,t={}){const{throttle:e=0,idle:s=200,onStop:a=K,onScroll:o=K,offset:r={left:0,right:0,top:0,bottom:0},eventListenerOptions:l={capture:!1,passive:!0},behavior:f="auto"}=t,h=P(0),g=P(0),$=B({get(){return h.value},set(E){v(E,void 0)}}),d=B({get(){return g.value},set(E){v(void 0,E)}});function v(E,R){var A,H,z;const W=V(n);W&&((z=W instanceof Document?document.body:W)==null||z.scrollTo({top:(A=V(R))!=null?A:d.value,left:(H=V(E))!=null?H:$.value,behavior:V(f)}))}const b=P(!1),I=ft({left:!0,right:!1,top:!0,bottom:!1}),L=ft({left:!1,right:!1,top:!1,bottom:!1}),F=E=>{b.value&&(b.value=!1,L.left=!1,L.right=!1,L.top=!1,L.bottom=!1,a(E))},et=De(F,e+s),X=E=>{const R=E.target===document?E.target.documentElement:E.target,A=R.scrollLeft;L.left=A<h.value,L.right=A>g.value,I.left=A<=0+(r.left||0),I.right=A+R.clientWidth>=R.scrollWidth-(r.right||0)-Mt,h.value=A;let H=R.scrollTop;E.target===document&&!H&&(H=document.body.scrollTop),L.top=H<g.value,L.bottom=H>g.value,I.top=H<=0+(r.top||0),I.bottom=H+R.clientHeight>=R.scrollHeight-(r.bottom||0)-Mt,g.value=H,b.value=!0,et(E),o(E)};return bt(n,"scroll",e?Oe(X,e,!0,!1):X,l),bt(n,"scrollend",F,l),{x:$,y:d,isScrolling:b,arrivedState:I,directions:L}}var Ct;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(Ct||(Ct={}));function Qt(n){const t=window.getComputedStyle(n);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&n.clientHeight<n.scrollHeight||t.overflowY==="auto"&&n.clientWidth<n.scrollWidth)return!0;{const e=n.parentNode;return!e||e.tagName==="BODY"?!1:Qt(e)}}function Le(n){const t=n||window.event,e=t.target;return Qt(e)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function Pe(n,t=!1){const e=P(t);let s=null,a;rt(Bt(n),l=>{if(l){const f=l;a=f.style.overflow,e.value&&(f.style.overflow="hidden")}},{immediate:!0});const o=()=>{const l=V(n);!l||e.value||(xt&&(s=bt(l,"touchmove",f=>{Le(f)},{passive:!1})),l.style.overflow="hidden",e.value=!0)},r=()=>{const l=V(n);!l||!e.value||(xt&&(s==null||s()),l.style.overflow=a,e.value=!1)};return St(r),B({get(){return e.value},set(l){l?o():r()}})}function Ee(n={}){const{interimResults:t=!0,continuous:e=!0,window:s=Nt}=n,a=Bt(n.lang||"en-US"),o=P(!1),r=P(!1),l=P(""),f=ne(void 0),h=(I=!o.value)=>{o.value=I},g=()=>{o.value=!0},$=()=>{o.value=!1},d=s&&(s.SpeechRecognition||s.webkitSpeechRecognition),v=Me(()=>d);let b;return v.value&&(b=new d,b.continuous=e,b.interimResults=t,b.lang=S(a),b.onstart=()=>{r.value=!1},rt(a,I=>{b&&!o.value&&(b.lang=I)}),b.onresult=I=>{const L=Array.from(I.results).map(F=>(r.value=F.isFinal,F[0])).map(F=>F.transcript).join("");l.value=L,f.value=void 0},b.onerror=I=>{f.value=I},b.onend=()=>{o.value=!1,b.lang=S(a)},rt(o,()=>{o.value?b.start():b.stop()})),St(()=>{o.value=!1}),{isSupported:v,isListening:o,isFinal:r,recognition:b,result:l,error:f,toggle:h,start:g,stop:$}}var Ae=Object.defineProperty,Lt=Object.getOwnPropertySymbols,qe=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Pt=(n,t,e)=>t in n?Ae(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,He=(n,t)=>{for(var e in t||(t={}))qe.call(t,e)&&Pt(n,e,t[e]);if(Lt)for(var e of Lt(t))Re.call(t,e)&&Pt(n,e,t[e]);return n};const je={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};He({linear:ke},je);const Ve={key:0,class:"fixed top-0 left-0 w-full h-full z-30 flex justify-center items-center"},Fe=["onClick"],Be={class:"absolute card lg:w-96 w-11/12 bg-base-100 shadow-xl"},Ne=Q({__name:"modal",props:{isOpen:{type:Boolean}},emits:["click:background"],setup(n,{emit:t}){const e=n,s=Pe(document.body),a=()=>{t("click:background")};return rt(()=>e.isOpen,o=>{s.value=o}),(o,r)=>(O(),ut(se,{name:"modal"},{default:Et(()=>[n.isOpen?(O(),x("div",Ve,[p("div",{class:"bg-neutral/[.4] w-full h-full",onClick:gt(a,["self"])},null,8,Fe),p("div",Be,[oe(o.$slots,"default",{},void 0,!0)])])):Z("",!0)]),_:3}))}});const at=(n,t)=>{const e=n.__vccOpts||n;for(const[s,a]of t)e[s]=a;return e},Qe=at(Ne,[["__scopeId","data-v-1b4d69e4"]]),Ue={},Ye={xmlns:"http://www.w3.org/2000/svg",height:"100%",width:"100%",viewBox:"0 96 960 960"},Ge=p("path",{class:"fill-inherit",d:"m361 757 119-121 120 121 47-48-119-121 119-121-47-48-120 121-119-121-48 48 120 121-120 121 48 48ZM261 936q-24 0-42-18t-18-42V306h-41v-60h188v-30h264v30h188v60h-41v570q0 24-18 42t-42 18H261Zm438-630H261v570h438V306Zm-438 0v570-570Z"},null,-1),Ze=[Ge];function ze(n,t){return O(),x("svg",Ye,Ze)}const Je=at(Ue,[["render",ze]]),Ke={},Xe={xmlns:"http://www.w3.org/2000/svg",height:"100%",viewBox:"0 96 960 960",width:"100%"},tn=p("path",{class:"fill-inherit",d:"m475 976 181-480h82l186 480h-87l-41-126H604l-47 126h-82Zm151-196h142l-70-194h-2l-70 194Zm-466 76-55-55 204-204q-38-44-67.5-88.5T190 416h87q17 33 37.5 62.5T361 539q45-47 75-97.5T487 336H40v-80h280v-80h80v80h280v80H567q-22 69-58.5 135.5T419 598l98 99-30 81-127-122-200 200Z"},null,-1),en=[tn];function nn(n,t){return O(),x("svg",Xe,en)}const sn=at(Ke,[["render",nn]]),on={},rn={xmlns:"http://www.w3.org/2000/svg",height:"100%",viewBox:"0 96 960 960",width:"100%"},an=p("path",{d:"M761 927 526.472 692Q496 714.923 457.541 727.962 419.082 741 373.438 741q-115.373 0-193.905-78.66Q101 583.68 101 470.84t78.66-191.34q78.66-78.5 191.5-78.5t191.34 78.613Q641 358.227 641 471.15q0 45.85-13 83.35-13 37.5-38 71.5l238 236q13 14.023 13 33.103 0 19.079-14.192 32.375Q812.543 941 793.549 941q-18.993 0-32.549-14ZM371.441 650q75.985 0 127.272-51.542Q550 546.917 550 471.412q0-75.505-51.346-127.459Q447.309 292 371.529 292q-76.612 0-128.071 51.953Q192 395.907 192 471.412t51.311 127.046Q294.623 650 371.441 650Z"},null,-1),ln=[an];function cn(n,t){return O(),x("svg",rn,ln)}const un=at(on,[["render",cn]]),dn={},hn={xmlns:"http://www.w3.org/2000/svg",height:"100%",viewBox:"0 96 960 960",width:"100%"},fn=p("path",{d:"M479.956 563q-76.826 0-124.391-48.065Q308 466.87 308 390.704q0-76.167 47.406-123.935Q402.812 219 479.637 219q76.826 0 125.094 47.656Q653 314.312 653 391.204q0 75.666-48.109 123.731Q556.781 563 479.956 563ZM229 926q-38.05 0-64.525-26.3Q138 873.4 138 835v-24.606q0-43.866 22.445-76.846Q182.891 700.568 220 684q68-32 131.854-47 63.854-15 127.731-15 65.877 0 128.646 16Q671 654 739 684q38.375 15.402 61.188 48.465Q823 765.528 823 810.394V835q0 38.4-26.769 64.7Q769.463 926 731 926H229Z"},null,-1),vn=[fn];function gn(n,t){return O(),x("svg",hn,vn)}const pn=at(dn,[["render",gn]]),mn={key:0,class:"card-body"},_n={class:"card-title"},bn={class:"card-actions justify-end mt-2"},wn=["onSubmit"],yn=["value"],$n={class:"form-control"},Sn={class:"input-group"},Tn=["value"],kn=["disabled","onClick"],Dn={class:"card-actions justify-end mt-2"},On=p("button",{class:"btn btn-sm btn-outline btn-success",type:"submit"}," сохранить ",-1),xn=Q({__name:"record_modal",props:{word:null},emits:["click:close","click:remove","click:save","click:update-translation"],setup(n,{emit:t}){const e=n,[s,a]=Ie(!1),o=()=>{a(!1),t("click:close")},r=()=>{e.word&&t("click:remove",e.word)},l=h=>{var d,v;if(!e.word)return;const g=new FormData(h.target),$={...e.word,value:((d=g.get("value"))==null?void 0:d.toString())??"",translation:((v=g.get("translation"))==null?void 0:v.toString())??""};t("click:save",$),a(!1)},f=()=>{e.word&&t("click:update-translation",e.word)};return(h,g)=>(O(),ut(S(Qe),{"is-open":!!n.word,"onClick:background":o},{default:Et(()=>{var $,d,v,b,I,L,F;return[S(s)?Z("",!0):(O(),x("div",mn,[p("h1",_n,ot(($=n.word)==null?void 0:$.value),1),p("p",null,ot((d=n.word)==null?void 0:d.translation),1),p("div",bn,[p("button",{class:"btn btn-sm btn-outline btn-error fill-error hover:fill-info-content",onClick:r},[N(S(Je),{class:"w-5 h-5"})]),p("button",{class:"btn btn-sm btn-outline btn-info",onClick:g[0]||(g[0]=et=>S(a)(!0))}," редактировать ")])])),S(s)?(O(),x("form",{key:1,class:"card-body gap-y-4",onSubmit:gt(l,["prevent"])},[p("input",{class:"input input-sm input-bordered input-info",name:"value",value:(v=n.word)==null?void 0:v.value},null,8,yn),p("div",$n,[p("div",Sn,[p("input",{class:"input input-sm input-bordered input-info w-full",name:"translation",value:(b=n.word)==null?void 0:b.translation},null,8,Tn),p("button",{class:J(["btn btn-sm btn-square fill-info-content hover:fill-info",{loading:(I=n.word)==null?void 0:I.isLoadTranslation}]),disabled:(L=n.word)==null?void 0:L.isLoadTranslation,onClick:gt(f,["prevent"])},[(F=n.word)!=null&&F.isLoadTranslation?Z("",!0):(O(),ut(S(sn),{key:0,class:"w-4 h-4"}))],10,kn)])]),p("div",Dn,[p("button",{class:"btn btn-sm btn-outline btn-error",onClick:g[1]||(g[1]=et=>S(a)(!1))}," отмена "),On])],40,wn)):Z("",!0)]}),_:1},8,["is-open"]))}}),In=Q({__name:"index",setup(n){const t=jt(),{wordsToShow:e}=At(t),{removeWord:s,modifyWord:a,getWordTranslation:o}=t,r=P(),l=d=>{r.value=d},f=()=>{r.value=void 0},h=d=>{s(d.id),f()},g=d=>{a(d),f()},$=d=>{r.value&&(r.value={...r.value,isLoadTranslation:!0},o(d).then(v=>{r.value&&(r.value={...r.value,translation:v,isLoadTranslation:!1})}).finally(()=>{r.value&&(r.value={...r.value,isLoadTranslation:!1})}))};return(d,v)=>(O(),x(ct,null,[N(ye,{words:S(e),"selected-word":r.value,"onClick:word":l},null,8,["words","selected-word"]),N(S(xn),{word:r.value,"onClick:close":f,"onClick:remove":h,"onClick:save":g,"onClick:updateTranslation":$},null,8,["word"])],64))}}),Wn="375012104214-6j6lnfvk092ut4p1h0hlbq4n3r63qp5a.apps.googleusercontent.com";class Mn{constructor(){T(this,"fetcher");T(this,"tokenStorageKey","google-jwt-token");T(this,"login",(t,e)=>{globalThis.google.accounts.oauth2.initTokenClient({client_id:Wn,callback:s=>{this.token=s.access_token,t==null||t()},error_callback:e,scope:"profile"}).requestAccessToken()});T(this,"logout",t=>{this.token=null,t==null||t()});T(this,"getUserInfo",()=>this.fetcher.get("",{headers:{Authorization:`Bearer ${this.token}`}}));this.fetcher=new Ht({host:"https://www.googleapis.com/oauth2/v1/userinfo?alt=json"})}get token(){return globalThis.localStorage.getItem(this.tokenStorageKey)}set token(t){if(!t){globalThis.localStorage.removeItem(this.tokenStorageKey);return}globalThis.localStorage.setItem(this.tokenStorageKey,t)}get isLoggedIn(){return!!this.token}}class Cn{constructor(){T(this,"googleService");T(this,"authProviders");this.googleService=new Mn,this.authProviders={google:this.googleService}}checkAuth(){let t=null;for(const[e,s]of Object.entries(this.authProviders))if(s.isLoggedIn){t=e;break}return t}login(t,e,s){return this.authProviders[t].login(e,s)}logout(){Object.values(this.authProviders).forEach(({logout:t})=>t())}getUserInfo(t){return this.authProviders[t].getUserInfo()}}const Ut=Symbol("settings-store"),Ln=wt("settings",()=>{const n=new Cn,t=P(null),e=async r=>{t.value=await n.getUserInfo(r)},s=()=>{n.login("google",()=>void e("google"))},a=()=>{n.logout(),t.value=null},o=()=>{const r=n.checkAuth();r&&e(r)};return yt(()=>{o()}),{user:t,loginWithGoogle:s,logout:a}}),Yt=({scrollElement:n=document,offset:t}=Pn)=>{const{directions:e,y:s,arrivedState:a}=Ce(n,{behavior:"smooth"}),{bottom:o,top:r}=kt(a),{top:l,bottom:f}=kt(e),h=P(!1);return qt(()=>{l.value||o.value||r.value?h.value=!1:s.value>((t==null?void 0:t.value)??0)&&f.value&&(h.value=!0)},{flush:"post"}),{isHidden:h}},Pn={scrollElement:document},En=["value"],An={tabindex:"0",class:"btn btn-ghost btn-circle"},qn={class:"w-6 rounded-full"},Rn={tabindex:"0",class:"dropdown-content menu p-2 shadow bg-base-100 rounded-box"},Hn={class:"form-control"},jn=["value"],Vn=Q({__name:"search_bar",props:{value:null,onInput:{type:Function},onSubmit:{type:Function},inputClass:null,dropdownClass:null},setup(n){return(t,e)=>(O(),x(ct,null,[p("div",{class:J(["form-control",n.inputClass])},[p("input",{value:n.value,type:"text",placeholder:"Search",class:"input input-sm input-bordered",onInput:e[0]||(e[0]=(...s)=>n.onInput&&n.onInput(...s)),onKeypress:e[1]||(e[1]=pt((...s)=>n.onSubmit&&n.onSubmit(...s),["enter"]))},null,40,En)],2),p("div",{class:J(["dropdown dropdown-end",n.dropdownClass])},[p("label",An,[p("div",qn,[N(S(un))])]),p("ul",Rn,[p("li",Hn,[p("input",{value:n.value,type:"text",placeholder:"Search",class:"input input-sm input-bordered",onInput:e[2]||(e[2]=(...s)=>n.onInput&&n.onInput(...s)),onKeypress:e[3]||(e[3]=pt((...s)=>n.onSubmit&&n.onSubmit(...s),["enter"]))},null,40,jn)])])],2)],64))}}),Fn=p("div",{class:"navbar-start"},[p("h1",{class:"normal-case font-semibold text-xl select-none"}," focu ")],-1),Bn={class:"navbar-end gap-x-2"},Nn={class:"dropdown dropdown-end"},Qn={tabindex:"0",class:"btn btn-ghost btn-circle avatar"},Un={class:"w-6 rounded-full"},Yn=["src"],Gn={tabindex:"0",class:"mt-3 p-2 shadow menu menu-compact dropdown-content bg-base-100 rounded-box w-52"},Zn={key:0},zn={key:1},Jn=Q({__name:"header",setup(n){const t=mt($t),e=mt(Ut),s=B(()=>{var h;return((h=t==null?void 0:t.filterValues)==null?void 0:h.value)||""}),a=B(()=>e==null?void 0:e.user),o=P(),r=B(()=>{var h;return((h=o.value)==null?void 0:h.offsetHeight)||0}),{isHidden:l}=Yt({offset:r}),f=({target:h})=>{t==null||t.setFilterValue("value",h.value)};return(h,g)=>(O(),x("header",{ref_key:"elementRef",ref:o,class:J(["navbar bg-base-100 rounded-xl z-20 fixed -top-28 gap-x-2 drop-shadow-xl",{"top-1":!S(l)}])},[Fn,p("div",Bn,[N(Vn,{value:S(s),"on-input":f,"on-submit":f,"input-class":"hidden mm:block","dropdown-class":"mm:hidden"},null,8,["value"]),p("div",Nn,[p("label",Qn,[p("div",Un,[S(a)?(O(),x("img",{key:0,src:S(a).picture,referrerpolicy:"no-referrer"},null,8,Yn)):(O(),ut(S(pn),{key:1}))])]),p("ul",Gn,[S(a)?Z("",!0):(O(),x("li",Zn,[p("span",{onClick:g[0]||(g[0]=(...$)=>{var d,v;return((d=S(e))==null?void 0:d.loginWithGoogle)&&((v=S(e))==null?void 0:v.loginWithGoogle(...$))})}," Login with Google ")])),S(a)?(O(),x("li",zn,[p("span",{onClick:g[1]||(g[1]=(...$)=>{var d,v;return((d=S(e))==null?void 0:d.logout)&&((v=S(e))==null?void 0:v.logout(...$))})}," Logout ")])):Z("",!0)])])])],2))}}),Kn=wt("editor",()=>{const n=mt($t),t=P(""),e=P(!1),s=async()=>{if(e.value=!0,!t.value){a();return}await(n==null?void 0:n.addWord({value:t.value})),a()},a=()=>{t.value="",e.value=!1};return{word:t,isLoading:e,submitWord:s}}),Xn=["src"],ts=Q({__name:"speech",emits:["update:modelValue"],setup(n,{emit:t}){const{isSupported:e,isListening:s,isFinal:a,result:o,start:r,stop:l}=Ee(),f=B(()=>`/focu/img/icons/${s.value?"voice_recording":"mic"}.svg`),h=B(()=>({"btn-active":s.value})),g=()=>{s.value?l():r()};return qt(()=>{a.value&&(t("update:modelValue",o.value),l())}),($,d)=>S(e)?(O(),x("button",{key:0,class:J(["btn btn-success btn-square drop-shadow",S(h)]),onClick:g},[p("img",{src:S(f),alt:"toggle speech recognize",width:"32",height:"32"},null,8,Xn)],2)):Z("",!0)}}),es=["disabled"],ns=Q({__name:"editor",setup(n){const t=P(),e=Kn(),{word:s,isLoading:a}=At(e),{submitWord:o}=e,r=B(()=>{var f;return((f=t.value)==null?void 0:f.offsetHeight)||0}),{isHidden:l}=Yt({offset:r});return(f,h)=>(O(),x("div",{ref_key:"elementRef",ref:t,class:J(["navbar bg-base-100 rounded-xl z-20 fixed -bottom-28 gap-x-2 drop-shadow-2xl",{"bottom-1":!S(l)}])},[re(p("input",{"onUpdate:modelValue":h[0]||(h[0]=g=>vt(s)?s.value=g:null),type:"text",autocomplete:"off",class:"input input-bordered input-success flex-1 drop-shadow",placeholder:"Type something...",disabled:S(a),onKeypress:h[1]||(h[1]=pt((...g)=>S(o)&&S(o)(...g),["enter"]))},null,40,es),[[ae,S(s)]]),N(ts,{modelValue:S(s),"onUpdate:modelValue":h[2]||(h[2]=g=>vt(s)?s.value=g:null),disabled:S(a)},null,8,["modelValue","disabled"])],2))}}),ss={class:"min-h-full bg-base-200"},os={class:"relative container mx-auto"},rs={class:"px-2 py-20"},ls=Q({__name:"index",setup(n){const t=jt();Dt($t,t);const e=Ln();return Dt(Ut,e),yt(()=>{t.fetchWords()}),(s,a)=>(O(),x("main",ss,[p("div",os,[N(S(Jn),{class:"container"}),p("section",rs,[N(S(In))]),N(S(ns),{class:"container"})])]))}});export{ls as default};
